/* Styles communs aux pages de package + carrousel */
@layer base, components;

@layer base {
  .package-page .pkg-main { padding: 1.5rem clamp(1rem,2.5vw,3rem) 3rem; display:flex; flex-direction:column; gap:2.25rem; }
  .pkg-hero { background: var(--bg-alt); border:1px solid var(--border); padding:1.5rem 1.4rem 1.8rem; border-radius: var(--radius-m); box-shadow: var(--shadow-sm); display:flex; flex-direction:column; gap:1rem; }
  .pkg-hero h2 { margin:0; font-size:1.4rem; }
  .pkg-hero .lead { margin:0; font-size:.9rem; line-height:1.45; color: var(--text-soft); }
  .quick-meta { display:flex; gap:.5rem; flex-wrap:wrap; }
  .hero-actions { display:flex; gap:.6rem; flex-wrap:wrap; }
  .pkg-section { background: var(--bg-alt); border:1px solid var(--border); padding:1.25rem 1.2rem 1.4rem; border-radius: var(--radius-m); box-shadow: var(--shadow-sm); }
  .pkg-section h3 { margin:0 0 .85rem; font-size:1rem; }
  .concepts { margin:0; padding-left:1.2rem; display:grid; gap:.4rem; font-size:.78rem; }
  .code { background: var(--bg); border:1px solid var(--border); padding:.9rem 1rem; border-radius: var(--radius-s); overflow:auto; font-size:.75rem; line-height:1.35; }
  .api-table { width:100%; border-collapse: collapse; font-size:.72rem; }
  .api-table th, .api-table td { border:1px solid var(--border); padding:.55rem .6rem; text-align:left; }
  .api-table th { background: var(--bg); font-weight:600; }
  @media (max-width:720px){ .pkg-hero{padding:1.1rem 1rem 1.3rem;} }
}

/* main image defaults (replaces old carousel image rules) */
.main-image { background:#111; display:grid; place-items:center; overflow:hidden; }
.main-image img { width:100%; height:100%; object-fit:cover; display:block; }
.main-image::before { content:""; display:block; padding-top:56.25%; }

@layer demoOptional {
  /* Styles pour mini d√©mos optionnelles (inventaire etc.) */
  .demo { display:flex; flex-direction:column; gap:.9rem; }
  #demoForm { display:flex; gap:.5rem; flex-wrap:wrap; }
  #demoForm input { padding:.5rem .65rem; border:1px solid var(--border); background: var(--bg); border-radius: var(--radius-s); font: 500 .75rem var(--font-sans); }
  #demoForm input:focus { outline:none; box-shadow: var(--focus-ring); }
  .demo-list { list-style:none; margin:0; padding:0; display:grid; gap:.35rem; font-size:.7rem; }
  .demo-list li { background: var(--bg); border:1px solid var(--border); border-radius: var(--radius-s); padding:.45rem .6rem; display:flex; justify-content:space-between; align-items:center; }
  .demo-list button { background:none; border:none; color: var(--danger); font-weight:600; cursor:pointer; }
  .demo-list button:hover { text-decoration:underline; }
}

/* Sources viewer */
.sources { display:flex; flex-direction:column; gap:.8rem; }
.source-block { border:1px dashed var(--border); background: linear-gradient(180deg,var(--bg),var(--bg-accent)); padding:.6rem; border-radius:6px; }
.source-header { display:flex; justify-content:space-between; align-items:center; gap:.6rem; }
.source-toggle { background:none; border:1px solid var(--border); color:var(--text); padding:.45rem .65rem; border-radius:6px; cursor:pointer; font-weight:600; }
.source-toggle[aria-expanded="true"] { background:var(--bg-accent); border-color:var(--primary); color: var(--text); box-shadow: var(--focus-ring); }
.source-actions { display:flex; gap:.5rem; align-items:center; }
.source-download { text-decoration:none; font-size:.82rem; padding:.35rem .55rem; border-radius:6px; border:1px solid var(--border); background:var(--bg); color:var(--text); }
.source-download:hover { background:var(--bg-accent); }
.source-content { margin-top:.6rem; display:none; }
.source-content pre { margin:0; padding:.9rem; background:var(--bg); border:1px solid var(--border); border-radius:6px; overflow:auto; font-size:.78rem; line-height:1.35; }
.source-empty { font-size:.85rem; color:var(--text-soft); padding:.6rem; }

/* Package detail layout (left image, right meta) */
.package-detail { display:grid; grid-template-columns: 1fr 320px; gap:.9rem; align-items:start; max-width:1100px; margin:0 auto; }
.package-media { background: var(--bg-alt); border:1px solid var(--border); border-radius: var(--radius-m); padding:0.75rem; padding-bottom:1rem; }
/* main image: enforce 16:9 using pseudo-element fallback plus absolutely positioned image */
.main-image { width:100%; position:relative; overflow:hidden; border-radius:6px; background:#111; }
.main-image::before { content:""; display:block; padding-top:56.25%; /* 16:9 */ }
.main-image img { position:absolute; inset:0; width:100%; height:100%; object-fit:contain; display:block; background: #111; }
.thumbs { margin-top:.6rem; display:flex; gap:.6rem; overflow:auto; padding:0.5rem 0 0.6rem 0; }
.thumbs { margin-top:.6rem; display:flex; gap:.6rem; overflow:auto; padding:0.5rem 0 0.6rem 0.6rem; }
.thumbs .thumb { min-width:96px; flex:0 0 96px; height:60px; border:1px solid var(--border); border-radius:6px; overflow:hidden; cursor:pointer; background:#222; padding:2px; box-sizing:border-box; }
.thumbs .thumb img { width:100%; height:100%; object-fit:cover; display:block; }
.thumbs .thumb[aria-current="true"] { outline:3px solid var(--primary); }

.package-meta-right { display:flex; flex-direction:column; gap:1rem; }
.author { display:flex; gap:.6rem; align-items:center; }
.author img { width:54px; height:54px; border-radius:50%; object-fit:cover; border:1px solid var(--border); }
.meta-row { display:flex; justify-content:space-between; align-items:center; gap:.5rem; }
.tags-list { display:flex; gap:.4rem; flex-wrap:wrap; }
.download-big { display:inline-block; width:100%; text-align:center; padding:.8rem; border-radius:10px; border:1px solid var(--border); background:var(--bg); font-weight:700; text-decoration:none; color:var(--text); }
.download-big:hover { background:var(--bg-accent); }

/* header small tweaks */
.app-header .mini-back { font-weight:600; text-decoration:none; color:var(--text); }

@media (max-width:940px){ .package-detail { grid-template-columns: 1fr; } .package-meta-right { order:2; } .package-media { order:1; } }
